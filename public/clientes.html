<!-- ./public/clientes.html -->

<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./css/styles.css">
  <link rel="stylesheet" href="./css/clientes.css">
  <title>Themis Data - Cadastro de Clientes</title>
</head>

<body>
  <header class="header">
    <div class="logo-header" onclick="window.location.href='/menu'" style="cursor:pointer;">
      <img src="/images/logo.png" alt="Themis Data Logo">
      <h1>Themis Data</h1>
    </div>
    <div class="user-info">
      <div class="user-avatar">
        <img id="userAvatar" alt="Avatar do usu√°rio"
          onerror="this.style.display='none'; document.querySelector('.fallback').style.display='flex';">
        <div class="fallback" id="userAvatarFallback">?</div>
      </div>
      <div style="display: flex; flex-direction: column; align-items: flex-start;">
        <span id="userNome"></span>
        <span id="userNivelAcesso" style="font-size:0.95em; color:#667eea; font-weight:500;"></span>
      </div>
      <button class="menu-toggle" onclick="toggleMenu()">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
      </button>
      <div class="dropdown-menu" id="dropdownMenu">
        <a href="/usuarios">üë• Editar Usu√°rios</a>
        <a href="#" onclick="alterarSenha()">üîí Alterar Senha</a>
        <a href="#" onclick="configuracoes()">‚öôÔ∏è Configura√ß√µes</a>
        <a href="#" onclick="ajuda()">‚ùì Ajuda</a>
        <a href="/" class="logout-option">üö™ Sair</a>
      </div>
    </div>
  </header>

  <main class="main-content">
    <div class="content-tabs">
      <button class="tab-btn active" onclick="showTab('cadastro')">Novo Cliente</button>
      <button class="tab-btn" onclick="showTab('lista')">Lista de Clientes</button>
    </div>

    <div id="cadastro" class="tab-content active">
      <div class="form-container">
        <form id="clienteForm">
          <div class="message" id="message"></div>

          <div class="form-grid">
            <div class="form-group">
              <label for="nome">Nome Completo</label>
              <input type="text" id="nome" name="nome" required>
            </div>

            <div class="form-group">
              <label for="data_nasc">Data de Nascimento</label>
              <input type="date" id="data_nasc" name="data_nasc" required>
            </div>

            <div class="form-group">
              <label for="cpf_cnpj">CPF/CNPJ</label>
              <input type="text" id="cpf_cnpj" name="cpf_cnpj" maxlength="18" required>
            </div>

            <div class="form-group">
              <label for="rg">RG</label>
              <input type="text" id="rg" name="rg" maxlength="10" required>
            </div>

            <div class="form-group">
              <label for="telefone1">1¬∫ Telefone</label>
              <input type="tel" id="telefone1" name="telefone1" maxlength="14" required>
            </div>

            <div class="form-group">
              <label for="telefone2">2¬∫ Telefone (Opcional)</label>
              <input type="tel" id="telefone2" name="telefone2" maxlength="14" required>
            </div>

            <div class="form-group">
              <label for="email">E-mail</label>
              <input type="email" id="email" name="email" required>
            </div>

            <div class="form-group">
              <label for="endereco">Endere√ßo</label>
              <input type="text" id="endereco" name="endereco" required>
            </div>

            <div class="form-group">
              <label for="bairro">Bairro</label>
              <input type="text" id="bairro" name="bairro" required>
            </div>

            <div class="form-group">
              <label for="cep">Cep</label>
              <input type="text" id="cep" name="cep" required>
            </div>

            <div class="form-group">
              <label for="uf">UF</label>
              <select id="uf" name="uf" required>
                <option value="">Selecione...</option>
                <option value="AC">Acre</option>
                <option value="AL">Alagoas</option>
                <option value="AP">Amap√°</option>
                <option value="AM">Amazonas</option>
                <option value="BA">Bahia</option>
                <option value="CE">Cear√°</option>
                <option value="DF">Distrito Federal</option>
                <option value="ES">Esp√≠rito Santo</option>
                <option value="GO">Goi√°s</option>
                <option value="MA">Maranh√£o</option>
                <option value="MT">Mato Grosso</option>
                <option value="MS">Mato Grosso do Sul</option>
                <option value="MG">Minas Gerais</option>
                <option value="PA">Par√°</option>
                <option value="PB">Para√≠ba</option>
                <option value="PR">Paran√°</option>
                <option value="PE">Pernambuco</option>
                <option value="PI">Piau√≠</option>
                <option value="RJ">Rio de Janeiro</option>
                <option value="RN">Rio Grande do Norte</option>
                <option value="RS">Rio Grande do Sul</option>
                <option value="RO">Rond√¥nia</option>
                <option value="RR">Roraima</option>
                <option value="SC">Santa Catarina</option>
                <option value="SP">S√£o Paulo</option>
                <option value="SE">Sergipe</option>
                <option value="TO">Tocantins</option>
              </select>
            </div>

            <div class="form-group">
              <label for="cidade">Cidade</label>
              <input type="text" id="cidade" name="cidade" required>
            </div>


            <div class="form-group">
              <label for="profissao">Profiss√£o</label>
              <input type="text" id="profissao" name="profissao" required>
            </div>

            <div class="form-group">
              <label for="nacionalidade">Nacionalidade</label>
              <input type="text" id="nacionalidade" name="nacionalidade" required>
            </div>

            <div class="form-group">
              <label for="estado_civil">Estado Civil</label>
              <input type="text" id="estado_civil" name="estado_civil" required>
            </div>

          </div>

          <div class="form-actions" style="margin-top: 0px;">
            <button type="button" class="btn btn-secondary" onclick="limparFormulario()">Limpar</button>
            <button type="submit" class="btn btn-primary">Cadastrar Cliente</button>
          </div>
        </form>
      </div>
    </div>


    <div id="lista" class="tab-content">
      <div class="table-container">
        <div class="table-header">
          <h3>Lista de Clientes</h3>
          <div class="search-box">
            <input type="text" id="searchInput" placeholder="Buscar cliente...">
          </div>
        </div>

        <!-- ENVOLVER A TABELA NESTE WRAPPER -->
        <div class="table-scroll">
          <table id="clientesTable">
            <thead>
              <tr>
                <th>Nome</th>
                <th>CPF/CNPJ</th>
                <th>Telefone</th>
                <th>Op√ß√£o</th>
              </tr>
            </thead>
            <tbody id="clientesTableBody">
              <!-- Dados carregados dinamicamente -->
            </tbody>
          </table>
        </div>
      </div>
    </div>

  </main>

  <!-- Modal de edi√ß√£o de cliente -->
  <div id="modalEditarCliente" class="modal">
    <div class="modal-content">
      <span class="close" onclick="fecharModalEditar()">&times;</span>
      <h3>Editar Cliente</h3>
      <form id="formEditarCliente">
        <input type="hidden" id="edit_id" name="id">

        <div class="form-group"><label for="edit_nome">Nome Completo</label><input type="text" id="edit_nome"
            name="nome" required></div>

        <div class="form-group"><label for="edit_data_nasc">Data de Nascimento</label><input type="date"
            id="edit_data_nasc" name="data_nasc" required></div>

        <div class="form-group"><label for="edit_cpf_cnpj">CPF/CNPJ</label><input type="text" id="edit_cpf_cnpj"
            name="cpf_cnpj" maxlength="18" required></div>

        <div class="form-group"><label for="edit_rg">RG</label><input type="text" id="edit_rg" name="rg" maxlength="10"
            required></div>

        <div class="form-group"><label for="edit_telefone1">1¬∫ Telefone</label><input type="tel" id="edit_telefone1"
            name="telefone1" maxlength="14" required></div>

        <div class="form-group"><label for="edit_telefone2">2¬∫ Telefone</label><input type="tel" id="edit_telefone2"
            name="telefone2" maxlength="14" required></div>

        <div class="form-group"><label for="edit_email">E-mail</label><input type="email" id="edit_email" name="email">
        </div>

        <div class="form-group"><label for="edit_endereco">Endere√ßo</label><input type="text" id="edit_endereco"
            name="endereco" required></div>

        <div class="form-group"><label for="edit_bairro">Bairro</label><input type="text" id="edit_bairro" name="bairro"
            required></div>

        <div class="form-group"><label for="edit_cep">CEP</label><input type="text" id="edit_cep" name="cep" required>
        </div>

        <div class="form-group"><label for="edit_uf">UF</label><input type="text" id="edit_uf" name="uf" required></div>

        <div class="form-group"><label for="edit_cidade">Cidade</label><input type="text" id="edit_cidade" name="cidade"
            required></div>

        <div class="form-group"><label for="edit_profissao">Profiss√£o</label><input type="text" id="edit_profissao"
            name="profissao" required></div>

        <div class="form-group"><label for="edit_nacionalidade">Nacionalidade</label><input type="text"
            id="edit_nacionalidade" name="nacionalidade" required></div>

        <div class="form-group"><label for="edit_estado_civil">Estado Civil</label><input type="text"
            id="edit_estado_civil" name="estado_civil" required></div>

        <div style="margin-top:1.5rem; display:flex; gap:1rem; justify-content:flex-end;">
          <button type="button" class="btn btn-danger"
            onclick="excluirCliente(document.getElementById('edit_id').value)">Excluir</button>
          <button type="button" class="btn btn-secondary" onclick="fecharModalEditar()">Cancelar</button>
          <button type="submit" class="btn btn-primary">Salvar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal de visualiza√ß√£o de cliente (somente leitura) -->
  <div id="modalVisualizarCliente" class="modal">
    <div class="modal-content">
      <span class="close" onclick="fecharModalVisualizar()">&times;</span>
      <h3>Visualizar Cliente</h3>

      <!-- N√£o √© form: s√≥ campos readonly/disabled -->
      <input type="hidden" id="view_id">

      <div class="form-group">
        <label for="view_nome">Nome Completo</label>
        <input type="text" id="view_nome" readonly>
      </div>

      <div class="form-group">
        <label for="view_data_nasc">Data de Nascimento</label>
        <input type="date" id="view_data_nasc" disabled>
      </div>

      <div class="form-group">
        <label for="view_cpf_cnpj">CPF/CNPJ</label>
        <input type="text" id="view_cpf_cnpj" readonly>
      </div>

      <div class="form-group">
        <label for="view_rg">RG</label>
        <input type="text" id="view_rg" readonly>
      </div>

      <div class="form-group">
        <label for="view_telefone1">1¬∫ Telefone</label>
        <input type="tel" id="view_telefone1" readonly>
      </div>

      <div class="form-group">
        <label for="view_telefone2">2¬∫ Telefone</label>
        <input type="tel" id="view_telefone2" readonly>
      </div>

      <div class="form-group">
        <label for="view_email">E-mail</label>
        <input type="email" id="view_email" readonly>
      </div>

      <div class="form-group">
        <label for="view_endereco">Endere√ßo</label>
        <input type="text" id="view_endereco" readonly>
      </div>

      <div class="form-group">
        <label for="view_bairro">Bairro</label>
        <input type="text" id="view_bairro" readonly>
      </div>

      <div class="form-group">
        <label for="view_cep">CEP</label>
        <input type="text" id="view_cep" readonly>
      </div>

      <div class="form-group">
        <label for="view_uf">UF</label>
        <input type="text" id="view_uf" readonly>
      </div>

      <div class="form-group">
        <label for="view_cidade">Cidade</label>
        <input type="text" id="view_cidade" readonly>
      </div>

      <div class="form-group">
        <label for="view_profissao">Profiss√£o</label>
        <input type="text" id="view_profissao" readonly>
      </div>

      <div class="form-group">
        <label for="view_nacionalidade">Nacionalidade</label>
        <input type="text" id="view_nacionalidade" readonly>
      </div>

      <div class="form-group">
        <label for="view_estado_civil">Estado Civil</label>
        <input type="text" id="view_estado_civil" readonly>
      </div>

      <div style="margin-top:1.5rem; display:flex; gap:1rem; justify-content:flex-end;">
        <button type="button" class="btn btn-secondary" onclick="fecharModalVisualizar()">Fechar</button>
      </div>
    </div>
  </div>


  <script src="js/script.js"></script>
  <script src="js/clientes.js"></script>
</body>

</html>